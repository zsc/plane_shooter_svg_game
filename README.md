# 全民飞机大战 - 核心框架

## 项目概述

本项目为经典街机风格垂直卷轴飞机射击游戏的核心框架实现，完成了游戏的基础架构开发。

## 已完成功能

### 阶段一：核心框架 ✅

✅ **游戏循环和状态机**
- 固定时间步长的游戏循环（60 FPS）
- 完整的状态机系统（菜单、游戏、暂停、游戏结束）
- 性能监控和自动质量调整

✅ **基础渲染系统**
- Canvas 2D渲染器
- 背景滚动效果
- 精灵绘制系统
- HUD界面显示
- 调试信息显示（F3切换）

✅ **输入系统**
- 键盘输入处理（方向键/WASD移动）
- 鼠标和触摸支持
- 输入平滑和缓冲
- 死区处理

✅ **玩家战机基本控制**
- 8方向移动控制
- 速度和加速度系统
- 边界限制
- 自动射击系统
- 生命值和无敌机制

### 阶段二：战斗系统 ✅

✅ **武器系统**
- 武器基类架构
- 机枪、激光炮、导弹发射器
- 武器管理器
- 能量消耗机制
- 武器升级路径

✅ **子弹系统**
- 对象池优化
- 弹道计算
- 追踪导弹
- 激光束碰撞
- 穿透机制

✅ **敌机系统**
- 6种敌机类型（侦察机、战斗机、轰炸机等）
- AI行为模式（直线、正弦波、追踪等）
- 敌机编队（线形、V字、圆形、波浪）
- 动态难度调整
- 血条显示

✅ **碰撞检测**
- 空间分区优化
- 圆形和矩形碰撞
- 碰撞响应处理
- 伤害计算
- 碰撞统计

✅ **粒子特效**
- 爆炸效果
- 击中火花
- 烟雾效果
- 推进器火焰
- 收集效果
- 对象池管理

## 项目结构

```
plane_shooter_svg_game/
├── index.html              # 游戏主页面
├── index.md               # 游戏设计规范文档
├── chapter*.md            # 各章节详细设计文档
├── assets.html            # SVG游戏素材库
├── package.json           # 项目配置
├── test_headless.js       # Headless测试套件
├── js/
│   ├── core/
│   │   ├── GameConfig.js     # 游戏配置
│   │   ├── GameLoop.js       # 游戏循环
│   │   └── StateMachine.js   # 状态机
│   ├── render/
│   │   └── Renderer.js       # 渲染系统
│   ├── input/
│   │   └── InputManager.js   # 输入管理
│   ├── entities/
│   │   ├── Player.js         # 玩家实体
│   │   └── Enemy.js          # 敌机实体
│   ├── combat/
│   │   ├── Weapon.js         # 武器系统
│   │   ├── BulletSystem.js   # 子弹管理
│   │   └── CollisionSystem.js # 碰撞检测
│   ├── effects/
│   │   └── ParticleSystem.js # 粒子特效
│   └── Game.js               # 游戏主类
└── node_modules/          # 依赖包（测试用）
```

## 运行方式

### 1. 浏览器直接运行
直接用浏览器打开 `index.html` 文件即可运行游戏。

### 2. 本地服务器运行（推荐）
```bash
# Python 3
python3 -m http.server 8080

# 或者使用 Node.js
npx http-server -p 8080

# 访问 http://localhost:8080
```

### 3. 运行测试
```bash
# 安装测试依赖
npm install

# 运行 Headless 测试
npm test
```

## 操作说明

### 键盘控制
- **Enter** - 开始游戏（在菜单界面）
- **方向键/WASD** - 控制战机移动
- **ESC** - 暂停/继续游戏
- **F3** - 切换调试模式（显示性能信息）

### 游戏状态
- **菜单** - 按 Enter 开始游戏
- **游戏中** - 控制战机躲避和射击
- **暂停** - 按 ESC 暂停/继续
- **游戏结束** - 按 Enter 返回菜单

## 测试结果

所有核心功能测试通过 ✅

```
========== 测试结果 ==========
通过: 12
失败: 0
总计: 12
==============================
```

测试覆盖：
- 游戏配置加载
- 游戏初始化
- 状态机切换
- 玩家实体
- 玩家移动
- 边界检查
- 伤害机制
- 射击系统
- 游戏循环
- 输入系统
- 性能监控
- 重生机制

## 技术特点

1. **模块化架构** - 清晰的模块划分，易于扩展
2. **性能优化** - 固定时间步长更新，插值渲染
3. **响应式输入** - 输入平滑和缓冲机制
4. **完整测试** - Headless模式单元测试
5. **调试支持** - 实时性能监控和调试信息

## 下一步开发计划

根据 `index.md` 的规划，后续阶段包括：

- **阶段三：关卡内容** - 关卡设计、Boss战斗、道具系统
- **阶段四：完善优化** - UI完善、音效集成、性能优化
- **阶段五：测试发布** - 完整测试、平衡调整、发布准备

## 开发团队

基于 `index.md` 和相关章节规范文档开发

## 许可证

MIT License